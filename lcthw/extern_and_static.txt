- extern

make THE_SIZE in ex22.c avaliable to other .c files

我们是在 ex22.c 中定义的 THE_SIZE

// ex22.c
int THE_SIZE = 1000;


然而我们是在 ex22.h 中声明它 extern

extern int THE_SIZE;

ex22_main.c 直接可以读到它


- static

extern的反义词，变量只能在当前.c文件中使用。

static int THE_AGE = 37; // 静态变量

// 但是我们可以通过 set / get 来暴露出 THE_AGE
// 这也是作者的建议，不要写太多全局变量（变量而非常量），通过setter/getter来暴露

int get_age(){
  return THE_AGE;
}


void set_age(int age) {
  THE_AGE = age;
}


// 
double update_ratio(double new_ratio){
  static double ratio = 1.0;

  double old_ratio = ratio;
  ratio = new_ratio;
  
  // 这个 ratio 只能在函数中访问，所以没啥用吧？
  // 这个 ratio 的确没太大用处，作者建议不要使用函数级别的static变量，而且会造成隐患|||

  return old_ratio;
}
